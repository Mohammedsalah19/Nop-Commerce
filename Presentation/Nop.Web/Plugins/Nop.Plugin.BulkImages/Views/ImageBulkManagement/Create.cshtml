@using Nop.Web.Framework;
@using Nop.Web.Framework.UI;
@model Nop.Plugin.BulkImages.Domain.Images360

@{
    Layout = "~/Presentation/Nop.Admin/Views/Shared/_AdminLayout.cshtml";
}



@using (Html.BeginForm("UploadFile", "ImageBulkManagement", FormMethod.Post,
                          new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.FilePath, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <input type="file" name="FilePath" id="FilePath" class="form-control" />
                @Html.ValidationMessageFor(model => model.FilePath, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ProductId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="form-group">
                    <select name="Products" id="Products" class="form-control">
                        <option value="" selected disabled>Select Status </option>
                    </select>
                </div>
                @Html.ValidationMessageFor(model => model.ProductId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

@*<form id="CreateForm" enctype="multipart/form-data">

    <div class="form-horizontal">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.FilePath, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <input type="file" name="FilePath" id="FilePath" class="form-control" />
                @Html.ValidationMessageFor(model => model.FilePath, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.ProductId, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="form-group">
                    <select name="Products" id="Products" class="form-control">
                        <option value="" selected disabled>Select Status </option>
                    </select>
                </div>
                @Html.ValidationMessageFor(model => model.ProductId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="button" onclick="Uploadimage()" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>


</form>*@


<script>


     function GetAllproducts() {
        $('#Products').empty();
        $('#Products').append('<option class="default" value="" selected disabled>Select Products</option>');
        $.ajax({
            url: '@Url.Action("GetAllProducts", "ImageBulkManagement")',
            method: 'GET',
            success: response => {
                if (response && response.length) {
                    console.log(response);
                    response.forEach(j => {
                        $('#Products').append(`<option value="${j.Id}">${j.Name}</option>`);
                    });
                }
            }
        });
    }


</script>

@*<script>
    function Uploadimage() {

        var form = $("#CreateForm").serialize();
        console.log(form);
        $.ajax({
            url: '/ImageBulkManagement/UploadFile',
            method: 'post',
            processData: false,
            contentType :"application/json",

            data: { form },
            success: response => {
                alert("Success");
            }
        });

    }


</script>*@
<script>
    $(document).ready(function () {
        GetAllproducts();
    });
</script>